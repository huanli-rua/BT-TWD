DATA:
  dataset_name: "bank_full"
  raw_path: "../data/bank/bank-full.csv"        # 数据文件路径（分号分隔）
  data_path: "../data/bank/bank-full.csv"
  target_col: "y"
  positive_label: "yes"                      # 原始正类取值，会在加载时映射为 1
  negative_label: "no"
  file_type: "csv"
  sep: ";"
  use_kfold: true
  n_splits: 5
  shuffle: true
  stratify: true
  random_state: 42
  test_size: 0.2

PREPROCESS:
  continuous_cols:
    - "age"
    - "balance"
    - "day"
    - "duration"
    - "campaign"
    - "pdays"
    - "previous"
  categorical_cols:
    - "job"
    - "marital"
    - "education"
    - "default"
    - "housing"
    - "loan"
    - "contact"
    - "month"
    - "poutcome"
  handle_missing: "none"
  fillna_strategy: "most_frequent"
  scale_continuous: true
  scaler_type: "standard"
  encoding_type: "onehot"
  drop_first: true
  save_feature_names: true

BTTWD:
  bucket_levels:
    - level: 1
      name: "L1_age"
      type: "numeric_bin"
      col: "age"
      bins: [30, 40, 50, 60]
      labels: ["<=30", "30-40", "40-50", "50-60", ">60"]

    - level: 2
      name: "L2_job"
      type: "categorical_group"
      col: "job"
      groups:
        white_collar:  ["admin.", "management", "technician"]
        blue_collar:   ["blue-collar", "services", "housemaid"]
        self_emp:      ["self-employed", "entrepreneur"]
        no_income:     ["student", "unemployed"]
        retired:       ["retired"]
        unknown:       ["unknown"]
      default_group: "unknown"

    - level: 3
      name: "L3_contact"
      type: "categorical_group"
      col: "contact"
      groups:
        cellular: ["cellular"]
        telephone: ["telephone"]
      default_group: "unknown"

  min_bucket_size: 200
  max_levels: 3
  min_gain_for_split: 0.005
  gamma_bucket: 0.02
  bucket_subsample: 1.0
  max_train_samples_per_bucket: 5000
  score_metric: "bac_regret"
  parent_share_rate: 0.2
  min_parent_share: 50
  val_ratio: 0.3
  min_val_samples_per_bucket: 20
  use_global_backoff: true
  global_estimator: "xgb"
  bucket_estimator: "none"
  posterior_estimator: "logreg"
  logreg_C: 1.0
  knn_k: 10
  bucket_rf:
    n_estimators: 200
    max_depth: null
    random_state: 42
    n_jobs: -1
  bucket_xgb:
    n_estimators: 200
    max_depth: 3
    learning_rate: 0.1
    subsample: 0.8
    colsample_bytree: 0.8
    reg_lambda: 1.0
    random_state: 42
    n_jobs: -1
  global_xgb:
    n_estimators: 300
    max_depth: 4
    learning_rate: 0.1
    subsample: 0.8
    colsample_bytree: 0.8
    reg_lambda: 1.0
    random_state: 42
    n_jobs: -1

THRESHOLDS:
  mode: "bucket_wise"
  objective: "regret"
  alpha_grid: [0.6, 0.7, 0.8, 0.9]
  beta_grid: [0.1, 0.2, 0.3, 0.4]
  gap_min: 0.05
  costs:
    C_TP: 0.0
    C_TN: 0.0
    C_FP: 1.0
    C_FN: 3.0
    C_BP: 1.5
    C_BN: 0.5
  alpha_init: 0.6
  beta_init: 0.2
  min_samples_for_thresholds: 50

BASELINES:
  use_logreg: true
  use_random_forest: false
  use_knn: false
  use_xgboost: true

  common:
    threshold_mode: "fixed"
    fixed_threshold: 0.4
  logreg:
    C: 1.0
    max_iter: 500
    use_custom_threshold: true
    custom_threshold: 0.4
  xgboost:
    n_estimators: 300
    max_depth: 4
    learning_rate: 0.1
    subsample: 0.8
    colsample_bytree: 0.8
    reg_lambda: 1.0
    random_state: 42
    n_jobs: -1
    use_custom_threshold: true
    custom_threshold: 0.4

EXP:
  kfold_repeats: 1
  n_jobs: -1
  verbose: 1

METRICS:
  use_metrics: ["Precision", "Recall", "F1", "BAC", "AUC", "MCC", "Kappa", "Regret"]
  pos_label: 1

OUTPUT:
  results_dir: "results"
  figs_dir: "figs"
  save_per_fold_metrics: true
  save_bucket_metrics: true
  save_config_copy: true
  save_threshold_logs: true
  threshold_log_filename: "bucket_thresholds_per_fold.csv"

SEED:
  global_seed: 42
